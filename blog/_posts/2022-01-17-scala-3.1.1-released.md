---
layout: blog-detail
post-type: blog
by: Paweł Marks, VirtusLab
title: Scala 3.1.1 and forward compatibility news
---

Hello from the Scala 3 team! After a slightly longer than usual pause, we are back with a new release of the Scala compiler and exciting news about improvements in forward compatibility. The delay in the release was caused by urgent bugs that needed backporting and testing, and then the holiday season.

## Improvements is Scala 3.1.1

Scala 3.1.1-RC2 was promoted to a full stable release of the language. Scala 3.1.1 is the first patch version after the 3.1 minor release. It is therefore focused on bug fixes and improvements in overall correctness and stability. Although there are no new additions to the language, you can still spot some noticeable improvements:

- You can use `using` clauses to introduce Scala 2 conversions.

  Now the code like this should compile and perform necessary conversion from `A` to `B` in the method body:

  ```scala
    def example[A, B](a: A)(using A <:< B) =
      val b: B = a
      ???
  ```

  To know more see [PR #13662](https://github.com/lampepfl/dotty/pull/13662) and [related issue](https://github.com/lampepfl/dotty/issues/12955).
- Mirrors can be correctly summoned for hierarchical sum types compiled by Scala 3.0.x ([PR #14100](https://github.com/lampepfl/dotty/pull/14100)).
- Dual Scala 2/3 macros can be now declared in non-experimental scopes ([PR #13795](https://github.com/lampepfl/dotty/pull/13795)).
- Scaladoc can correctly handle symbolic class names, such as `/` or `\` ([PR #13827](https://github.com/lampepfl/dotty/pull/13827)).
- Scaladoc documentation has a new, improved UI.

For a comprehensive list of fixes, take a look at [the full changelog on GitHub](https://github.com/lampepfl/dotty/releases/tag/3.1.1).

## 3.1.2-RC1 and forward compatibility improvements

Scala 3 has excellent backward compatibility guarantees between the minor versions. On the other hand, after the recent release of Scala 3.1, we can see that the libraries should be really cautious with updating the compiler version, as it is forcing the bump on every user of that library. We do not want library authors to be stuck on old versions of the compiler as that would mean that they are locked out of many bugfixes, or we would need to spend enormous effort on backporting every bugfix to all past versioning lines.

We are sure we want to mitigate those difficulties. We already have implemented the first and most important part of the solution and have it ready for public testing. Beginning in Scala 3.1.2-RC1, that was just released, compiler is able to generate output that can be consumed by older versions. To enable that, you need to specify a minimum version of the language using the experimental `-Yscala-release` flag.

So, for example, compiling your library using Scala 3.1.2-RC2 with `-Yscala-release:3.0` flag, you make it possible for people still using Scala 3.0 to depend on your library. This has one limitation, you won't be able to use any symbol added to the standard library after 3.0. They are marked in the code and in the documentation by the internal `@since` annotation that was also added in this version.

Those restrictions are not final, and in the future, we may decide to allow using some functions from the newer versions of the standard library and to make the `@since` annotation public.

One important note is that the `-Yscala-release` flag is experimental and not yet available in any stable release of the compiler. It means the build tools, such as SBT or Mill, are not yet aware of its existence. Of course, you can declare usage of the flag in your build file, and the compiler will respect it. However, there may still be some hiccups, like generated artifacts depending on the incorrect version of the stdlib. We will do our best to help fix those minor issues before the stable release of 3.1.1.

If you are interested in other changes brought by 3.1.2-RC1, there is, as always, [a changelog on GitHub](https://github.com/lampepfl/dotty/releases/tag/3.1.2-RC1).

## Contributors

Thank you to all the contributors who made this release possible.

According to `git shortlog -sn --no-merges 3.1.0..3.1.1` these are:

```
    50  Fengyun Liu
    43  Martin Odersky
    26  Olivier Blanvillain
    24  Kacper Korban
    21  Filip Zybała
    18  Dale Wijnand
    18  Nicolas Stucki
    17  Phil
    13  Andrzej Ratajczak
    10  Guillaume Martres
    10  noti0na1
     8  Paweł Marks
     7  Jamie Thompson
     5  soronpo
     5  Tom Grigg
     3  Yichen Xu
     3  Dmitrii Naumenko
     3  ghostbuster91
     3  Julien Richard-Foy
     2  Stéphane Micheloud
     2  bjornregnell
     2  Vadim Chelyshov
     1  ysthakur
     1  Daniel Esik
     1  EnzeXing
     1  Jasper Moeys
     1  Katja Goltsova
     1  Matthieu Bovel
     1  Ondrej Lhotak
     1  Oron Port
     1  Rikito Taniguchi
     1  Seth Tisue
     1  Som Snytt
     1  Sébastien Doeraene
     1  Tomasz Godzik
     1  oronpo
```
